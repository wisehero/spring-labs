### ==========================================
### Spring Transaction ì‹¤í—˜ API
### ==========================================
### IntelliJì—ì„œ ë°”ë¡œ ì‹¤í–‰ ê°€ëŠ¥!
### ê° ìš”ì²­ ì˜†ì˜ â–¶ ë²„íŠ¼ í´ë¦­

### ------------------------------------------
### ì‹¤í—˜ 1-A: ìê¸° í˜¸ì¶œ (Self-Invocation) í…ŒìŠ¤íŠ¸
### ------------------------------------------
### ì˜ˆìƒ ê²°ê³¼: REQUIRES_NEWê°€ ë¬´ì‹œë˜ì–´ ê°™ì€ íŠ¸ëœì­ì…˜
### ë¡œê·¸ì—ì„œ "ê°™ì€ íŠ¸ëœì­ì…˜ì¸ê°€? true" í™•ì¸!

GET http://localhost:8080/api/v1/experiments/self-invocation
Accept: application/json

### ------------------------------------------
### ì‹¤í—˜ 1-B: ì™¸ë¶€ í˜¸ì¶œ í…ŒìŠ¤íŠ¸ (ì •ìƒ ì¼€ì´ìŠ¤)
### ------------------------------------------
### ì˜ˆìƒ ê²°ê³¼: REQUIRES_NEWê°€ ì •ìƒ ë™ì‘
### ë¡œê·¸ì—ì„œ "ê°™ì€ íŠ¸ëœì­ì…˜ì¸ê°€? false" í™•ì¸!

GET http://localhost:8080/api/v1/experiments/external-call
Accept: application/json

### ------------------------------------------
### ì‹¤í—˜ 2-A: readOnly ìƒíƒœ í™•ì¸
### ------------------------------------------
### FlushMode, DefaultReadOnly í™•ì¸

GET http://localhost:8080/api/v1/experiments/readonly-status
Accept: application/json

### ------------------------------------------
### ì‹¤í—˜ 2-B: readOnlyì—ì„œ ìˆ˜ì • ì‹œë„
### ------------------------------------------
### {id}ë¥¼ ì‹¤ì œ transaction IDë¡œ ë³€ê²½

GET http://localhost:8080/api/v1/experiments/readonly-modify/1
Accept: application/json

### ------------------------------------------
### ì‹¤í—˜ 2-C: readOnly ì„±ëŠ¥ ë¹„êµ
### ------------------------------------------
### readOnly=true vs false ì„±ëŠ¥ ì°¨ì´

GET http://localhost:8080/api/v1/experiments/readonly-performance
Accept: application/json

### ------------------------------------------
### ì‹¤í—˜ 2-D: readOnlyì—ì„œ persist ì‹œë„
### ------------------------------------------
### âš ï¸ ì£¼ì˜: í…ŒìŠ¤íŠ¸ ë°ì´í„°ê°€ ìƒì„±ë  ìˆ˜ ìˆìŒ!

GET http://localhost:8080/api/v1/experiments/readonly-persist
Accept: application/json

### ------------------------------------------
### ğŸ§ª ëª¨ë“  ì‹¤í—˜ í•œ ë²ˆì— ì‹¤í–‰
### ------------------------------------------
### ì½˜ì†” ë¡œê·¸ë¥¼ í™•ì¸í•˜ì„¸ìš”!

GET http://localhost:8080/api/v1/experiments/all
Accept: application/json

### ==========================================
### ì‹¤í—˜ 3: Bulk Insert ì„±ëŠ¥ ë¹„êµ
### ==========================================
### saveAll vs JdbcTemplate vs Native Bulk Insert

### ------------------------------------------
### ğŸ† ì „ì²´ ë¹„êµ (100, 1000, 10000ê±´ í•œ ë²ˆì—)
### ------------------------------------------
### âš ï¸ 10000ê±´ í¬í•¨ë˜ì–´ ì‹œê°„ì´ ì¢€ ê±¸ë¦¼!

POST http://localhost:8080/api/v1/experiments/bulk-insert/compare-all
Accept: application/json

### ------------------------------------------
### 100ê±´ ë¹„êµ
### ------------------------------------------

POST http://localhost:8080/api/v1/experiments/bulk-insert/compare/100
Accept: application/json

### ------------------------------------------
### 1000ê±´ ë¹„êµ
### ------------------------------------------

POST http://localhost:8080/api/v1/experiments/bulk-insert/compare/1000
Accept: application/json

### ------------------------------------------
### 10000ê±´ ë¹„êµ
### ------------------------------------------
### âš ï¸ ì‹œê°„ì´ ì¢€ ê±¸ë¦´ ìˆ˜ ìˆìŒ!

POST http://localhost:8080/api/v1/experiments/bulk-insert/compare/10000
Accept: application/json

### ------------------------------------------
### ê°œë³„ í…ŒìŠ¤íŠ¸: JPA saveAll
### ------------------------------------------

POST http://localhost:8080/api/v1/experiments/bulk-insert/saveall/100
Accept: application/json

###

POST http://localhost:8080/api/v1/experiments/bulk-insert/saveall/1000
Accept: application/json

### ------------------------------------------
### ê°œë³„ í…ŒìŠ¤íŠ¸: JdbcTemplate batchUpdate
### ------------------------------------------

POST http://localhost:8080/api/v1/experiments/bulk-insert/jdbc-batch/100
Accept: application/json

###

POST http://localhost:8080/api/v1/experiments/bulk-insert/jdbc-batch/1000
Accept: application/json

### ------------------------------------------
### ê°œë³„ í…ŒìŠ¤íŠ¸: Native Bulk Insert
### ------------------------------------------

POST http://localhost:8080/api/v1/experiments/bulk-insert/native-bulk/100
Accept: application/json

###

POST http://localhost:8080/api/v1/experiments/bulk-insert/native-bulk/1000
Accept: application/json

### ------------------------------------------
### í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬
### ------------------------------------------

DELETE http://localhost:8080/api/v1/experiments/bulk-insert/cleanup
Accept: application/json

### ==========================================
### Lab 04: Transaction Propagation (REQUIRED vs REQUIRES_NEW)
### ==========================================

### ì‹¤í—˜ 4-1: REQUIRED - ì™¸ë¶€ íŠ¸ëœì­ì…˜ ì°¸ì—¬ í™•ì¸
GET http://localhost:8080/api/v1/experiments/propagation/4-1/required-joins

### ---

### ì‹¤í—˜ 4-2: REQUIRED - íŠ¸ëœì­ì…˜ ì—†ì„ ë•Œ ìƒˆë¡œ ìƒì„±
GET http://localhost:8080/api/v1/experiments/propagation/4-2/required-creates-new

### ---

### ì‹¤í—˜ 4-3: REQUIRES_NEW - í•­ìƒ ìƒˆ íŠ¸ëœì­ì…˜ ìƒì„±
GET http://localhost:8080/api/v1/experiments/propagation/4-3/requires-new-always-new

### ---

### ì‹¤í—˜ 4-4: REQUIRED inner ì˜ˆì™¸ - ë¡¤ë°± ì „íŒŒ íŠ¸ë© (UnexpectedRollbackException)
POST http://localhost:8080/api/v1/experiments/propagation/4-4/required-inner-throws

### ---

### ì‹¤í—˜ 4-5: REQUIRES_NEW inner ì˜ˆì™¸ - outer ìƒì¡´
POST http://localhost:8080/api/v1/experiments/propagation/4-5/requires-new-inner-throws

### ---

### ì‹¤í—˜ 4-6: Outer ì‹¤íŒ¨ í›„ REQUIRES_NEW inner ìƒì¡´
POST http://localhost:8080/api/v1/experiments/propagation/4-6/outer-fails-after-inner

### ---

### ì‹¤í—˜ 4-7: UnexpectedRollbackException ìƒì„¸ ë¶„ì„ (3 ì‹œë‚˜ë¦¬ì˜¤)
POST http://localhost:8080/api/v1/experiments/propagation/4-7/unexpected-rollback-deep-dive

### ---

### ì‹¤í—˜ 4-8: DB ì»¤ë„¥ì…˜ ë¶„ë¦¬ í™•ì¸
GET http://localhost:8080/api/v1/experiments/propagation/4-8/connection-separation

### ---

### ì‹¤í—˜ 4-9: ì»¤ë„¥ì…˜ í’€ ê³ ê°ˆ ì‹œë®¬ë ˆì´ì…˜
### WARNING: ì´ ìš”ì²­ì€ ì•½ 30ì´ˆ ì†Œìš”ë©ë‹ˆë‹¤! HikariCP í’€ ê³ ê°ˆ ëŒ€ê¸° ì‹œê°„.
POST http://localhost:8080/api/v1/experiments/propagation/4-9/connection-pool-exhaustion

### ---

### Lab 04 í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬
DELETE http://localhost:8080/api/v1/experiments/propagation/cleanup
